<!DOCTYPE html><html lang="en">
<head>
    
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="author" content="punchagan">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Postfix + Mailman for Multiple Domains. | Noetic Nought</title>
    
            <link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">

    



    
</head>

<body>
    <section class="social">
        <ul>
<!--        <h1 id="blog-title">
            <a href="/" title="Noetic Nought">Noetic Nought</a>
        </h1>
        
         -->
        
            <li><a href="../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://twitter.com/punchagan" title="Twitter profile"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/punchagan" title="GitHub profile"><i class="icon-github"></i></a></li>

<!--         -->
        </ul>
    </section>
    <section class="page-content">
        <div class="content" rel="main">
            
    <div class="post">
    
    <h1>Postfix + Mailman for Multiple Domains.</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2009-08-05T01:23:00">2009-08-05 01:23</time>
            </div>
            

            
          |  
        <a href="postfix-mailman-for-multiple-domains.org" id="sourcelink">Source</a>

            
    <div class="tags">
        <ul>
        More posts about:  
            <li><a class="tag" href="../categories/ology.html">ology</a></li>
        </ul>
    </div>

        </div>
        <div class="body">
            <p>
Well, there are a hazaar tutorials on setting up Postfix and
Mailman for Debian for a single domain. There were a few for doing
that for multiple domains also, but nothing comprehensive, if I
could say so. This link is pretty comprehensive and details all
the steps for setting up Postfix for a single domain.  Here is all
you'll want to know about setting up Virtual domains in Postfix.
</p>

<p>
You only need to make a few changes for adding a second (or more)
domain. You just need to add the <code>virtual_alias_domains</code> and add
<code>virtual_alias_maps</code>. Here is a glimpse of how my <code>main.cf</code> looks:
</p>

<pre class="example">
myhostname = mail.abc.in
mydomain = abc.in
mydestination = $myhostname, $mydomain, localhost.$mydomain
myorigin = /etc/mailname
virtual_alias_maps =
                hash:/etc/postfix/virtual-xyz,
                hash:/etc/postfix/virtual-abc,
                hash:/var/lib/mailman/data/virtual-mailman
virtual_alias_domains = xyz.in, mail.xyz.in
</pre>

<p>
<code>virtual-xyz</code> and <code>virtual-abc</code> contain the virtual aliases for
each domain. Note that Postfix expects hash files and hence you
need to run <code>postmap /etc/postfix/virtual-abc</code> each
time the file is changed, to keep the hash file in sync with the
text file that you edit. Also, you need to run <code>postfix reload</code>,
each time you make changes to <code>main.cf</code> or <code>master.cf</code>
</p>

<p>
Fairly straight forward, right? But it took me quite sometime to
get it all right, since this was the first time I was doing
anything with Mail Transfer Agents or the like.
</p>

<p>
Now, onto Mailman. Well the Installation Manual of Mailman,
literally has it all. Here is a look at how my
<code>mm_cfg.py</code> looks:
</p>

<pre class="example">
DEFAULT_EMAIL_HOST = 'abc.in'
DEFAULT_URL_HOST   = 'mail.abc.in'
add_virtualhost(DEFAULT_URL_HOST, DEFAULT_EMAIL_HOST)
POSTFIX_STYLE_VIRTUAL_DOMAINS=['xyz.in']
add_virtualhost('mail.xyz.in', 'xyz.in')
MTA='Postfix'
</pre>

<p>
The only trouble was to get mailing lists with same names on both
the domains (which I couldn't get working). I experimented with
multiple mailman instances but that won't work because the MTA
can't differentiate between the two instances of mailman. The
alternative is probably to have two instances of postfix running
too. But that I felt was like going too far, and gave up. [What if
we wanted to add another domain to the list?!]
</p>

<p>
Also, I had to make a few alterations to the Apache file to allow
access to the mailman pages without breaking the Zope redirection
that was already set-up.
</p>

<p>
[Thanks to Shantanu and Vattam (and all the hazaar people using
Postfix and Mailman and cared to document things for the sake of
others, and of course Google)]
</p>
        </div>
        
    <ul class="pager">
        <li class="previous">
            <a href="foss-talks-at-cdeep.html">← Previous post</a>
        </li>
        <li class="next">
            <a href="good-bad-or-human.html">Next post →</a>
        </li>
    </ul>

            
        
        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_shortname ="rusticreverie";
            var disqus_url="http://punchagan.muse-amuse.in/posts/postfix-mailman-for-multiple-domains.html";
        var disqus_title="Postfix + Mailman for Multiple Domains.";
        var disqus_identifier="cache/posts/postfix-mailman-for-multiple-domains.html";
        var disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">Comments powered by <span class="logo-disqus">Disqus</span></a>


        

    </div>

            © 2013
<a href="mailto:punchagan%5B@T%5Dmuse-amuse.in">punchagan</a> -
<a href="http://getnikola.com">Nikola</a> powered -

<a rel="license" href="http://creativecommons.org/licenses/by/3.0/deed.en_US">
Creative Commons Attribution 3.0 Unported License</a>
 -
<a href="http://themes.getnikola.com/#zen">zen</a> theme
            
	

        </div>
    </section>
    
            <script src="../assets/js/all-nocdn.js" type="text/javascript"></script>

    
        <script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
    
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21111013-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

</body>
</html>